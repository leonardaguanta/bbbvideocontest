/*!

   Viewport autoplay  plugin for Flowplayer HTML5

   Copyright (c) 2016-2017, Flowplayer Drive Oy

   Released under the MIT License:
   http://www.opensource.org/licenses/mit-license.php

   Requires Flowplayer HTML5 version 7.x or greater
   7514b13aead3e995cfed89f3e6f4037e760dd8fc

*/
!function(){function e(e){var t=e.getBoundingClientRect(),n=.8*t.height;return t.top+n>=0&&t.left>=0&&t.bottom-n<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}var t=window.requestAnimationFrame||setTimeout,n=function(n){var o=n.common,i=n.support;n(function(a,u){function l(){e(u)?(i.mutedAutoplay&&a.video.time<.3&&!a.splash&&(o.find(".fp-engine",u)[0].muted=!0),d&&(a.splash?a.load(null,function(){d=!1}):(a.one("resume",function(){d=!1}),a.resume()))):a.splash?d=!0:(a.playing&&a.one("pause",function(){d=!0}),a.pause())}if(a.conf.viewportAutoplay&&(i.firstframe||i.mutedAutoplay)){a.conf.autoplay=!1;var d=!0;if(a.conf.muted&&i.volume){o.addClass(u,"is-muted-autoplaying");var m=document.createElement("div");m.className="fp-autoplay-overlay",m.innerHTML='Click to unmute.. <a class="pause"></a>',u.appendChild(m),m.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),o.hasClass(e.target,"pause")?a.toggle():(a.mute(!1),o.removeClass(u,"is-muted-autoplaying"),i.mutedAutoplay&&(o.find(".fp-engine",u)[0].muted=!1),u.removeChild(m))})}a.on("ready",l),n.bean.on(window,"scroll.autoplay",function(){t(l)})}})};"object"==typeof module&&module.exports?module.exports=n:"function"==typeof window.flowplayer&&n(window.flowplayer)}();